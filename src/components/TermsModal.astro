---
---

<div id="termsModal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Termeni și Condiții</h3>
    </div>
    
    <div class="modal-body">
      <p>
        Bine ați venit la <strong>Generatorul de Rapoarte de Arbitraj</strong>. Înainte de a utiliza acest instrument, 
        vă rugăm să citiți și să acceptați termenii și condițiile.
      </p>
      
      <h4 style="color: var(--color-sky); margin: 1.5rem 0 1rem; font-size: 1rem;">Puncte Importante:</h4>
      <ul style="margin: 1rem 0; padding-left: 1.5rem; line-height: 1.8;">
        <li>Rapoartele sunt destinate <strong>AJF Ilfov</strong> și <strong>FRF</strong></li>
        <li>Sunteți responsabil pentru corectitudinea datelor introduse</li>
        <li>Trebuie să verificați fiecare raport generat înainte de trimitere</li>
        <li><strong style="color: var(--color-error);">Dezvoltatorul nu este responsabil pentru rapoarte defectuoase generate ca urmare a introducerii de date incorecte</strong></li>
      </ul>
      
      <p>
        Pentru detalii complete, consultați 
        <a href="/termeni-si-conditii" target="_blank">
          pagina completă de Termeni și Condiții
        </a>.
      </p>
      
      <div class="terms-checkbox">
        <label>
          <input type="checkbox" id="acceptTerms" />
          <span>
            Am citit și accept termenii și condițiile. Înțeleg că sunt responsabil pentru verificarea 
            rapoartelor generate și că dezvoltatorul nu este responsabil pentru eventualele erori.
          </span>
        </label>
      </div>
    </div>
    
    <div class="modal-actions">
      <button type="button" id="acceptButton" disabled>
        Accept Termenii și Condițiile
      </button>
    </div>
  </div>
</div>

<style>
  .modal-body {
    padding: var(--spacing-lg);
    overflow-y: auto;
    flex: 1;
    max-height: 60vh;
  }
  
  .modal-body p {
    line-height: 1.7;
    margin-bottom: 1rem;
  }
  
  .modal-body li {
    margin-bottom: 0.5rem;
  }
  
  .terms-checkbox {
    margin-top: var(--spacing-lg);
    padding: var(--spacing-md);
    background: rgba(56, 73, 89, 0.3);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
  }
  
  .terms-checkbox input[type="checkbox"] {
    appearance: auto;
    -webkit-appearance: checkbox;
    width: 18px;
    height: 18px;
    margin-top: 0.25rem;
    cursor: pointer;
    flex-shrink: 0;
    accent-color: var(--color-sky);
  }
  
  .terms-checkbox label {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    cursor: pointer;
    user-select: none;
  }
  
  .terms-checkbox label span {
    flex: 1;
    line-height: 1.6;
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
  }
  
  .modal-actions {
    padding: var(--spacing-lg);
    border-top: 1px solid var(--color-border);
    display: flex;
    justify-content: flex-end;
  }
  
  @media (max-width: 639px) {
    .modal-body {
      padding: var(--spacing-md);
    }
    
    .modal-actions {
      padding: var(--spacing-md);
    }
    
    .terms-checkbox {
      padding: var(--spacing-sm);
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const TERMS_ACCEPTED_KEY = 'termsAccepted';
    const TERMS_VERSION = '1.0';
    
    const modal = document.getElementById('termsModal');
    const acceptCheckbox = document.getElementById('acceptTerms') as HTMLInputElement;
    const acceptButton = document.getElementById('acceptButton') as HTMLButtonElement;
    const reportForm = document.getElementById('reportForm') as HTMLFormElement;
    
    // Check if terms were already accepted
    function checkTermsAcceptance() {
      const accepted = localStorage.getItem(TERMS_ACCEPTED_KEY);
      if (accepted !== TERMS_VERSION && modal) {
        modal.style.display = 'flex';
        modal.classList.add('active');
        // Disable form submission
        if (reportForm) {
          reportForm.style.pointerEvents = 'none';
          reportForm.style.opacity = '0.5';
        }
      }
    }
    
    // Enable/disable accept button based on checkbox
    if (acceptCheckbox) {
      acceptCheckbox.addEventListener('change', () => {
        if (acceptButton) {
          acceptButton.disabled = !acceptCheckbox.checked;
        }
      });
    }
    
    // Handle accept button click
    if (acceptButton) {
      acceptButton.addEventListener('click', () => {
        if (acceptCheckbox?.checked) {
          localStorage.setItem(TERMS_ACCEPTED_KEY, TERMS_VERSION);
          if (modal) {
            modal.style.display = 'none';
            modal.classList.remove('active');
          }
          // Enable form submission
          if (reportForm) {
            reportForm.style.pointerEvents = 'auto';
            reportForm.style.opacity = '1';
          }
        }
      });
    }
    
    // Prevent closing modal by clicking outside
    if (modal) {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          e.preventDefault();
          e.stopPropagation();
        }
      });
    }
    
    // Check on page load
    checkTermsAcceptance();
  });
</script>
