---
---

<div id="termsModal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Termeni și Condiții</h2>
    </div>
    
    <div class="modal-body">
      <p>
        Bine ați venit la <strong>Generatorul de Rapoarte de Arbitraj</strong>. Înainte de a utiliza acest instrument, 
        vă rugăm să citiți și să acceptați termenii și condițiile.
      </p>
      
      <h3>Puncte Importante:</h3>
      <ul>
        <li>Rapoartele sunt destinate <strong>AJF Ilfov</strong> și <strong>FRF</strong></li>
        <li>Sunteți responsabil pentru corectitudinea datelor introduse</li>
        <li>Trebuie să verificați fiecare raport generat înainte de trimitere</li>
        <li><strong>Dezvoltatorul nu este responsabil pentru rapoarte defectuoase generate ca urmare a introducerii de date incorecte</strong></li>
      </ul>
      
      <p>
        Pentru detalii complete, consultați 
        <a href="/termeni-si-conditii" target="_blank" style="color: var(--ui-primary); text-decoration: underline;">
          pagina completă de Termeni și Condiții
        </a>.
      </p>
      
      <div class="checkbox-container">
        <label style="display: flex; align-items: flex-start; gap: 0.75rem; cursor: pointer;">
          <input type="checkbox" id="acceptTerms" style="margin-top: 0.25rem; width: 18px; height: 18px; cursor: pointer;" />
          <span style="flex: 1; line-height: 1.6;">
            Am citit și accept termenii și condițiile. Înțeleg că sunt responsabil pentru verificarea 
            rapoartelor generate și că dezvoltatorul nu este responsabil pentru eventualele erori.
          </span>
        </label>
      </div>
    </div>
    
    <div class="modal-footer">
      <button type="button" id="acceptButton" class="btn-primary" disabled>
        Accept Termenii și Condițiile
      </button>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const TERMS_ACCEPTED_KEY = 'termsAccepted';
    const TERMS_VERSION = '1.0';
    
    const modal = document.getElementById('termsModal');
    const acceptCheckbox = document.getElementById('acceptTerms') as HTMLInputElement;
    const acceptButton = document.getElementById('acceptButton') as HTMLButtonElement;
    const reportForm = document.getElementById('reportForm') as HTMLFormElement;
    
    // Check if terms were already accepted
    function checkTermsAcceptance() {
      const accepted = localStorage.getItem(TERMS_ACCEPTED_KEY);
      if (accepted !== TERMS_VERSION && modal) {
        modal.style.display = 'flex';
        // Disable form submission
        if (reportForm) {
          reportForm.style.pointerEvents = 'none';
          reportForm.style.opacity = '0.5';
        }
      }
    }
    
    // Enable/disable accept button based on checkbox
    if (acceptCheckbox) {
      acceptCheckbox.addEventListener('change', () => {
        if (acceptButton) {
          acceptButton.disabled = !acceptCheckbox.checked;
        }
      });
    }
    
    // Handle accept button click
    if (acceptButton) {
      acceptButton.addEventListener('click', () => {
        if (acceptCheckbox?.checked) {
          localStorage.setItem(TERMS_ACCEPTED_KEY, TERMS_VERSION);
          if (modal) {
            modal.style.display = 'none';
          }
          // Enable form submission
          if (reportForm) {
            reportForm.style.pointerEvents = 'auto';
            reportForm.style.opacity = '1';
          }
        }
      });
    }
    
    // Prevent closing modal by clicking outside
    if (modal) {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          e.preventDefault();
          e.stopPropagation();
        }
      });
    }
    
    // Check on page load
    checkTermsAcceptance();
  });
</script>

<style>
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    backdrop-filter: blur(4px);
  }
  
  .modal-content {
    background: var(--ui-card);
    border-radius: 12px;
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    border: 1px solid var(--ui-border);
  }
  
  .modal-header {
    padding: 1.5rem;
    border-bottom: 1px solid var(--ui-border);
  }
  
  .modal-header h2 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--ui-text);
  }
  
  .modal-body {
    padding: 1.5rem;
    overflow-y: auto;
    flex: 1;
    color: var(--ui-text);
  }
  
  .modal-body h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 1.5rem 0 1rem;
    color: var(--ui-text);
  }
  
  .modal-body p {
    line-height: 1.7;
    margin-bottom: 1rem;
    color: var(--ui-text);
  }
  
  .modal-body ul {
    margin: 1rem 0;
    padding-left: 1.5rem;
    line-height: 1.7;
  }
  
  .modal-body li {
    margin-bottom: 0.75rem;
    color: var(--ui-text);
  }
  
  .checkbox-container {
    margin-top: 1.5rem;
    padding: 1rem;
    background: var(--ui-background);
    border: 1px solid var(--ui-border);
    border-radius: 8px;
  }
  
  .modal-footer {
    padding: 1.5rem;
    border-top: 1px solid var(--ui-border);
    display: flex;
    justify-content: flex-end;
  }
  
  .btn-primary {
    background: var(--ui-primary);
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  
  .btn-primary:hover:not(:disabled) {
    background: var(--ui-primary-hover);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  .btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  @media (max-width: 639px) {
    .modal-content {
      max-height: 95vh;
    }
    
    .modal-header,
    .modal-body,
    .modal-footer {
      padding: 1rem;
    }
    
    .modal-header h2 {
      font-size: 1.25rem;
    }
    
    .checkbox-container {
      padding: 0.75rem;
    }
  }
</style>
